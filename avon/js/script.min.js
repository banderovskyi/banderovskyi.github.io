$(document).ready(function(){
   // Rulare pina la ancor
   $(".anchor").on("click", function (e) {
      var anchor = $(this);
      $('html, body').stop().animate({
        scrollTop: $(anchor.attr('href')).offset().top
      }, 1500);
      e.preventDefault();
      // inchidem menu
      $(".shadow").fadeOut(400);
      $("nav").removeClass("animated slideInLeft").addClass("animated slideOutLeft");
      return false;
    });
   // afisare menu
   $("#show-menu").click(function(){
      // $(".shadow").fadeIn(400);
      $("#show-menu").hide();
      $("#close-menu").show();
      $("nav").slideDown();
      return false;
   });
   $("#close-menu").click(function(){
      // $(".shadow").fadeIn(400);
      $("#close-menu").hide();
      $("#show-menu").show();
      $("nav").slideUp();
      return false;
   });

   $("#show-search").click(function(){
      // $(".shadow").fadeIn(400);
      $("#show-search, .logo").hide();
      $("#close-search").show();
      $(".top form").show();
      return false;
   });
   $("#close-search").click(function(){
      // $(".shadow").fadeIn(400);
      $("#close-search").hide();
      $("#show-search, .logo").show();
      $(".top form").hide();
      return false;
   });
   

   // Slider init
   
   $('.product-slider_1').owlCarousel({
      loop: true,
      stagePadding: 0,
      margin: 16,
      responsiveClass: true,
      dots: false,
      navText: ['<button class="product-slider-prev arrow-slider arrow-slider-prev"></button>', '<button class="product-slider-next arrow-slider "></button>'],
      responsive: {
         0: {
            items: 2,
            nav: true
         },
         621:{
            items: 2,
            nav: true
         },
         744: {
            items: 3,
            nav: true
         },
         941: {
            items: 4,
            nav: true
         },
         1200: {
            items: 4,
            nav: true,
            loop: false,
         }
      }
   })
   $('.product-slider_2').owlCarousel({
      loop: true,
      stagePadding: 0,
      margin: 16,
      responsiveClass: true,
      dots: false,
      navText: ['<button class="product-slider-prev arrow-slider arrow-slider-prev"></button>', '<button class="product-slider-next arrow-slider "></button>'],
      responsive: {
         0: {
            items: 2,
            nav: true
         },
         621:{
            items: 2,
            nav: true
         },
         744: {
            items: 3,
            nav: true
         },
         941: {
            items: 4,
            nav: true
         },
         1200: {
            items: 4,
            nav: true,
            loop: false,
         }
      }
   })
   
   function counter(event) {
      if (!event.namespace) {
         return;
      }
      var slides = event.relatedTarget;
      $('.journal-slider__nav-text').text(slides.relative(slides.current()) + 1 + '-' + slides.items().length);
   }

   $('.journal-slider__wrap').owlCarousel({
      loop: false,
      margin: 0,
      nav: false,
      dots: false,
      items: 1,
      onInitialized: counter,
      onChanged: counter,
      touchDrag: false,
   })

   

   // Go to the next item
   $('.journal-slider-next, .journal-slider .arrow-slider-next').click(function () {
      $('.journal-slider__wrap').trigger('next.owl.carousel');
   })
   // Go to the previous item
   $('.journal-slider-prev, .journal-slider .arrow-slider-prev').click(function () {
      $('.journal-slider__wrap').trigger('prev.owl.carousel');
   })

   $('.journal-slider__wrap').on('change.owl.carousel', function (e) {
      if (e.namespace && e.property.name === 'position'
         && e.relatedTarget.relative(e.property.value) === e.relatedTarget.items().length - 1) {
         $('.journal-slider__nav').removeClass('journal-slider__nav-first').addClass('journal-slider__nav-last');
      }else if (e.relatedTarget.relative(e.property.value) === 0) {
         $('.journal-slider__nav').removeClass('journal-slider__nav-last').addClass('journal-slider__nav-first');
      }else{
         $('.journal-slider__nav').removeClass('journal-slider__nav-last').removeClass('journal-slider__nav-first');
      }
      
   });
   
   // Popup init

   $('.open_popup').click(function () {
      var popup_id = $('#' + $(this).attr("rel"));
      $(popup_id).fadeIn();
      $('.overlay').fadeIn();
      $('html, body').css('overflow', 'hidden');
   });
   $('.popup .popup-close, .overlay').click(function () {
      $('.overlay, .popup').fadeOut();
      $('html, body').css('overflow', 'auto');
   });

   $('.popup-full').click(function () {         
      $('.overlay, .popup').fadeOut();
      $('html, body').css('overflow', 'auto');
   })
   .children()
   .click(function (e) {        
      e.stopPropagation();   
   });

   // Zoom init

   $('.zoom').zoom({
      magnify: 1.5,
   });


});
