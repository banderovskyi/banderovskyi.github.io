!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self,t.Tether=e())}(this,function(){"use strict";function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)})}function o(t,e){e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)})}function n(t,e,n){n.forEach(function(i){e.indexOf(i)===-1&&t.classList.contains(i)&&o(t,i)}),e.forEach(function(e){t.classList.contains(e)||i(t,e)})}function s(t){M.push(t)}function r(){for(var t;t=M.pop();)t()}function a(t){void 0===t&&(t={});var e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var i in e)({}).hasOwnProperty.call(e,i)&&(t[i]=e[i])}),t}function h(){if(P)return P;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");a(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var o=t.offsetWidth;i===o&&(o=e.clientWidth),document.body.removeChild(e);var n=i-o;return P={width:n,height:n}}function l(t){return"function"==typeof t}function f(t){return"number"==typeof t}function p(t){return"object"==typeof t}function d(t){return"string"==typeof t}function c(t){return void 0===t}function u(t){var e;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var i=e.documentElement,o=m(t),n=v();return o.top-=n.top,o.left-=n.left,c(o.width)&&(o.width=document.body.scrollWidth-o.left-o.right),c(o.height)&&(o.height=document.body.scrollHeight-o.top-o.bottom),o.top=o.top-i.clientTop,o.left=o.left-i.clientLeft,o.right=e.body.clientWidth-o.width-o.left,o.bottom=e.body.clientHeight-o.height-o.top,o}function g(){L&&document.body.removeChild(L),L=null}function m(t){var e=t.getBoundingClientRect(),i={};for(var o in e)i[o]=e[o];try{if(t.ownerDocument!==document){var n=t.ownerDocument.defaultView.frameElement;if(n){var s=m(n);i.top+=s.top,i.bottom+=s.top,i.left+=s.left,i.right+=s.left}}}catch(r){}return i}function v(){var t=L;t&&document.body.contains(t)||(t=document.createElement("div"),t.setAttribute("data-tether-id",z()),a(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),L=t);var e=t.getAttribute("data-tether-id");return c(F[e])&&(F[e]=m(t),s(function(){delete F[e]})),F[e]}function b(t,e){if("scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),!c(e.nodeType)){var i=e,o=u(e),n=o,s=getComputedStyle(e);if(e=[n.left,n.top,o.width+n.left,o.height+n.top],i.ownerDocument!==document){var r=i.ownerDocument.defaultView;e[0]+=r.pageXOffset,e[1]+=r.pageYOffset,e[2]+=r.pageXOffset,e[3]+=r.pageYOffset}X.forEach(function(t,i){t=t[0].toUpperCase()+t.substr(1),"Top"===t||"Left"===t?e[i]+=parseFloat(s["border"+t+"Width"]):e[i]-=parseFloat(s["border"+t+"Width"])})}return e}function w(){for(var t={top:0,left:0},e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return i.forEach(function(e){var i=e.top,o=e.left;d(i)&&(i=parseFloat(i)),d(o)&&(o=parseFloat(o)),t.top+=i,t.left+=o}),t}function y(t){var e=t.left,i=t.top;return c(N[t.left])||(e=N[t.left]),c(N[t.top])||(i=N[t.top]),{left:e,top:i}}function C(t,e){var i=t.left,o=t.top;return"auto"===i&&(i=B[e.left]),"auto"===o&&(o=k[e.top]),{left:i,top:o}}function E(t,e){return d(t.left)&&t.left.indexOf("%")!==-1&&(t.left=parseFloat(t.left)/100*e.width),d(t.top)&&t.top.indexOf("%")!==-1&&(t.top=parseFloat(t.top)/100*e.height),t}function O(t){var e=t.split(" "),i=e[0],o=e[1];return{top:i,left:o}}function x(t){var e=getComputedStyle(t)||{},i=e.position,o=[];if("fixed"===i)return[t];for(var n=t;(n=n.parentNode)&&n&&1===n.nodeType;){var s=void 0;try{s=getComputedStyle(n)}catch(r){}if(c(s)||null===s)return o.push(n),o;var a=s,h=a.overflow,l=a.overflowX,f=a.overflowY;/(auto|scroll|overlay)/.test(h+f+l)&&("absolute"!==i||["relative","absolute","fixed"].indexOf(s.position)>=0)&&o.push(n)}return o.push(t.ownerDocument.body),t.ownerDocument!==document&&o.push(t.ownerDocument.defaultView),o}function T(t){return t.offsetParent||document.documentElement}function A(t){var e=t.ownerDocument,i=e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement;return i===t}function W(t,e,i){return void 0===i&&(i=1),t+i>=e&&e>=t-i}function _(){return performance.now()}var M=[],P=null,z=function(){var t=0;return function(){return++t}}(),F={},L=null,Y={position:function(t){var e=this,i=t.top,o=t.left,r=this.cache("element-bounds",function(){return u(e.element)}),a=r.height,h=r.width,l=this.getTargetBounds(),f=i+a,p=o+h,d=[];i<=l.bottom&&f>=l.top&&["left","right"].forEach(function(t){var e=l[t];e!==o&&e!==p||d.push(t)}),o<=l.right&&p>=l.left&&["top","bottom"].forEach(function(t){var e=l[t];e!==i&&e!==f||d.push(t)});var c=["left","top","right","bottom"];return this.all.push(this.getClass("abutted")),c.forEach(function(t){e.all.push(e.getClass("abutted")+"-"+t)}),d.length&&this.add.push(this.getClass("abutted")),d.forEach(function(t){e.add.push(e.getClass("abutted")+"-"+t)}),s(function(){e.options.addTargetClasses!==!1&&n(e.target,e.add,e.all),n(e.element,e.add,e.all)}),!0}},X=["left","top","right","bottom"],H={position:function(t){var e=this,i=t.top,o=t.left,r=t.targetAttachment;if(!this.options.constraints)return!0;var h=this.cache("element-bounds",function(){return u(e.element)}),l=h.height,f=h.width;if(0===f&&0===l&&!c(this.lastSize)){var p=this.lastSize;f=p.width,l=p.height}var g=this.cache("target-bounds",function(){return e.getTargetBounds()}),m=g.height,v=g.width,w=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,i=t.pinnedClass;e&&w.push(e),i&&w.push(i)}),w.forEach(function(t){["left","top","right","bottom"].forEach(function(e){w.push(t+"-"+e)})});var y=[],C=a({},r),E=a({},this.attachment);return this.options.constraints.forEach(function(t){var n=t.to,s=t.attachment,a=t.pin;c(s)&&(s="");var h,p;if(s.indexOf(" ")>=0){var u=s.split(" ");p=u[0],h=u[1]}else h=p=s;var g=b(e,n);"target"!==p&&"both"!==p||(i<g[1]&&"top"===C.top&&(i+=m,C.top="bottom"),i+l>g[3]&&"bottom"===C.top&&(i-=m,C.top="top")),"together"===p&&("top"===C.top&&("bottom"===E.top&&i<g[1]?(i+=m,C.top="bottom",i+=l,E.top="top"):"top"===E.top&&i+l>g[3]&&i-(l-m)>=g[1]&&(i-=l-m,C.top="bottom",E.top="bottom")),"bottom"===C.top&&("top"===E.top&&i+l>g[3]?(i-=m,C.top="top",i-=l,E.top="bottom"):"bottom"===E.top&&i<g[1]&&i+(2*l-m)<=g[3]&&(i+=l-m,C.top="top",E.top="top")),"middle"===C.top&&(i+l>g[3]&&"top"===E.top?(i-=l,E.top="bottom"):i<g[1]&&"bottom"===E.top&&(i+=l,E.top="top"))),"target"!==h&&"both"!==h||(o<g[0]&&"left"===C.left&&(o+=v,C.left="right"),o+f>g[2]&&"right"===C.left&&(o-=v,C.left="left")),"together"===h&&(o<g[0]&&"left"===C.left?"right"===E.left?(o+=v,C.left="right",o+=f,E.left="left"):"left"===E.left&&(o+=v,C.left="right",o-=f,E.left="right"):o+f>g[2]&&"right"===C.left?"left"===E.left?(o-=v,C.left="left",o-=f,E.left="right"):"right"===E.left&&(o-=v,C.left="left",o+=f,E.left="left"):"center"===C.left&&(o+f>g[2]&&"left"===E.left?(o-=f,E.left="right"):o<g[0]&&"right"===E.left&&(o+=f,E.left="left"))),"element"!==p&&"both"!==p||(i<g[1]&&"bottom"===E.top&&(i+=l,E.top="top"),i+l>g[3]&&"top"===E.top&&(i-=l,E.top="bottom")),"element"!==h&&"both"!==h||(o<g[0]&&("right"===E.left?(o+=f,E.left="left"):"center"===E.left&&(o+=f/2,E.left="left")),o+f>g[2]&&("left"===E.left?(o-=f,E.left="right"):"center"===E.left&&(o-=f/2,E.left="right"))),d(a)?a=a.split(",").map(function(t){return t.trim()}):a===!0&&(a=["top","left","right","bottom"]),a=a||[];var w=[],O=[];if(i<g[1]&&(a.indexOf("top")>=0?(i=g[1],w.push("top")):O.push("top")),i+l>g[3]&&(a.indexOf("bottom")>=0?(i=g[3]-l,w.push("bottom")):O.push("bottom")),o<g[0]&&(a.indexOf("left")>=0?(o=g[0],w.push("left")):O.push("left")),o+f>g[2]&&(a.indexOf("right")>=0?(o=g[2]-f,w.push("right")):O.push("right")),w.length){var x;x=c(e.options.pinnedClass)?e.getClass("pinned"):e.options.pinnedClass,y.push(x),w.forEach(function(t){y.push(x+"-"+t)})}if(O.length){var T;T=c(e.options.outOfBoundsClass)?e.getClass("out-of-bounds"):e.options.outOfBoundsClass,y.push(T),O.forEach(function(t){y.push(T+"-"+t)})}(w.indexOf("left")>=0||w.indexOf("right")>=0)&&(E.left=C.left=!1),(w.indexOf("top")>=0||w.indexOf("bottom")>=0)&&(E.top=C.top=!1),C.top===r.top&&C.left===r.left&&E.top===e.attachment.top&&E.left===e.attachment.left||(e.updateAttachClasses(E,C),e.trigger("update",{attachment:E,targetAttachment:C}))}),s(function(){e.options.addTargetClasses!==!1&&n(e.target,y,w),n(e.element,y,w)}),{top:i,left:o}}},S={position:function(t){var e=t.top,i=t.left;if(this.options.shift){var o=this.options.shift;l(o)&&(o=o.call(this,{top:e,left:i}));var n,s;if(d(o)){o=o.split(" "),o[1]=o[1]||o[0];var r=o;n=r[0],s=r[1],n=parseFloat(n,10),s=parseFloat(s,10)}else{var a=[o.top,o.left];n=a[0],s=a[1]}return e+=n,i+=s,{top:e,left:i}}}},D=function(){function t(){}var e=t.prototype;return e.on=function(t,e,i,o){return void 0===o&&(o=!1),c(this.bindings)&&(this.bindings={}),c(this.bindings[t])&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:i,once:o}),this},e.once=function(t,e,i){return this.on(t,e,i,!0)},e.off=function(t,e){if(c(this.bindings)||c(this.bindings[t]))return this;if(c(e))delete this.bindings[t];else for(var i=0;i<this.bindings[t].length;)this.bindings[t][i].handler===e?this.bindings[t].splice(i,1):++i;return this},e.trigger=function(t){if(!c(this.bindings)&&this.bindings[t]){for(var e=0,i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];for(;e<this.bindings[t].length;){var s=this.bindings[t][e],r=s.handler,a=s.ctx,h=s.once,l=a;c(l)&&(l=this),r.apply(l,o),h?this.bindings[t].splice(e,1):++e}}return this},t}(),B={center:"center",left:"right",right:"left"},k={middle:"middle",top:"bottom",bottom:"top"},N={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},R={modules:[H,Y,S]},j=function(){if(c(document))return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],i=0;i<e.length;++i){var o=e[i];if(void 0!==t.style[o])return o}}(),V=[],q=function(){V.forEach(function(t){t.position(!1)}),r()};!function(){var t=null,e=null,i=null,o=function n(){return!c(e)&&e>16?(e=Math.min(e-16,250),void(i=setTimeout(n,250))):void(!c(t)&&_()-t<10||(null!=i&&(clearTimeout(i),i=null),t=_(),q(),e=_()-t))};c(window)||c(window.addEventListener)||["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,o)})}();var U=function(l){function m(t){var i;return i=l.call(this)||this,i.position=i.position.bind(e(i)),V.push(e(i)),i.history=[],i.setOptions(t,!1),R.modules.forEach(function(t){c(t.initialize)||t.initialize.call(e(i))}),i.position(),i}t(m,l);var v=m.prototype;return v.getClass=function(t){void 0===t&&(t="");var e=this.options.classes;return c(e)||c(e[t])?this.options.classPrefix?this.options.classPrefix+"-"+t:t:e[t]===!1?"":this.options.classes[t]},v.setOptions=function(t,e){var i=this;void 0===e&&(e=!0);var o={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=a(o,t);var n=this.options,s=n.element,r=n.target,h=n.targetModifier;if(this.element=s,this.target=r,this.targetModifier=h,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if(c(i[t]))throw new Error("Tether Error: Both element and target must be defined");c(i[t].jquery)?d(i[t])&&(i[t]=document.querySelector(i[t])):i[t]=i[t][0]}),this._addClasses(),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=O(this.options.targetAttachment),this.attachment=O(this.options.attachment),this.offset=O(this.options.offset),this.targetOffset=O(this.options.targetOffset),c(this.scrollParents)||this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=x(this.target),this.options.enabled!==!1&&this.enable(e)},v.getTargetBounds=function(){if(c(this.targetModifier))return u(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var t=u(this.target),e={height:t.height,width:t.width,top:t.top,left:t.left};return e.height=Math.min(e.height,t.height-(pageYOffset-t.top)),e.height=Math.min(e.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,t.width-(pageXOffset-t.left)),e.width=Math.min(e.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e}if("scroll-handle"===this.targetModifier){var i,o=this.target;o===document.body?(o=document.documentElement,i={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):i=u(o);var n=getComputedStyle(o),s=o.scrollWidth>o.clientWidth||[n.overflow,n.overflowX].indexOf("scroll")>=0||this.target!==document.body,r=0;s&&(r=15);var a=i.height-parseFloat(n.borderTopWidth)-parseFloat(n.borderBottomWidth)-r,h={width:15,height:.975*a*(a/o.scrollHeight),left:i.left+i.width-parseFloat(n.borderLeftWidth)-15},l=0;a<408&&this.target===document.body&&(l=-11e-5*Math.pow(a,2)-.00727*a+22.58),this.target!==document.body&&(h.height=Math.max(h.height,24));var f=this.target.scrollTop/(o.scrollHeight-a);return h.top=f*(a-h.height-l)+i.top+parseFloat(n.borderTopWidth),this.target===document.body&&(h.height=Math.max(h.height,24)),h}},v.clearCache=function(){this._cache={}},v.cache=function(t,e){return c(this._cache)&&(this._cache={}),c(this._cache[t])&&(this._cache[t]=e.call(this)),this._cache[t]},v.enable=function(t){var e=this;void 0===t&&(t=!0),this.options.addTargetClasses!==!1&&i(this.target,this.getClass("enabled")),i(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(t){t!==e.target.ownerDocument&&t.addEventListener("scroll",e.position)}),t&&this.position()},v.disable=function(){var t=this;o(this.target,this.getClass("enabled")),o(this.element,this.getClass("enabled")),this.enabled=!1,c(this.scrollParents)||this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})},v.destroy=function(){var t=this;this.disable(),this._removeClasses(),V.forEach(function(e,i){e===t&&V.splice(i,1)}),0===V.length&&g()},v.updateAttachClasses=function(t,e){var i=this;t=t||this.attachment,e=e||this.targetAttachment;var o=["left","top","bottom","right","middle","center"];!c(this._addAttachClasses)&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),c(this._addAttachClasses)&&(this._addAttachClasses=[]),this.add=this._addAttachClasses,t.top&&this.add.push(this.getClass("element-attached")+"-"+t.top),t.left&&this.add.push(this.getClass("element-attached")+"-"+t.left),e.top&&this.add.push(this.getClass("target-attached")+"-"+e.top),e.left&&this.add.push(this.getClass("target-attached")+"-"+e.left),this.all=[],o.forEach(function(t){i.all.push(i.getClass("element-attached")+"-"+t),i.all.push(i.getClass("target-attached")+"-"+t)}),s(function(){c(i._addAttachClasses)||(n(i.element,i._addAttachClasses,i.all),i.options.addTargetClasses!==!1&&n(i.target,i._addAttachClasses,i.all),delete i._addAttachClasses)})},v.position=function(t){var e=this;if(void 0===t&&(t=!0),this.enabled){this.clearCache();var i=C(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,i);var o=this.cache("element-bounds",function(){return u(e.element)}),n=o.width,s=o.height;if(0!==n||0!==s||c(this.lastSize))this.lastSize={width:n,height:s};else{var a=this.lastSize;n=a.width,s=a.height}var l=this.cache("target-bounds",function(){return e.getTargetBounds()}),f=l,d=E(y(this.attachment),{width:n,height:s}),g=E(y(i),f),m=E(this.offset,{width:n,height:s}),v=E(this.targetOffset,f);d=w(d,m),g=w(g,v);for(var b=l.left+g.left-d.left,O=l.top+g.top-d.top,x=0;x<R.modules.length;++x){var A=R.modules[x],W=A.position.call(this,{left:b,top:O,targetAttachment:i,targetPos:l,elementPos:o,offset:d,targetOffset:g,manualOffset:m,manualTargetOffset:v,scrollbarSize:_,attachment:this.attachment});if(W===!1)return!1;!c(W)&&p(W)&&(O=W.top,b=W.left)}var _,M={page:{top:O,left:b},viewport:{top:O-pageYOffset,bottom:pageYOffset-O-s+innerHeight,left:b-pageXOffset,right:pageXOffset-b-n+innerWidth}},P=this.target.ownerDocument,z=P.defaultView;if(z.innerHeight>P.documentElement.clientHeight&&(_=this.cache("scrollbar-size",h),M.viewport.bottom-=_.height),z.innerWidth>P.documentElement.clientWidth&&(_=this.cache("scrollbar-size",h),M.viewport.right-=_.width),["","static"].indexOf(P.body.style.position)!==-1&&["","static"].indexOf(P.body.parentElement.style.position)!==-1||(M.page.bottom=P.body.scrollHeight-O-s,M.page.right=P.body.scrollWidth-b-n),!c(this.options.optimizations)&&this.options.optimizations.moveElement!==!1&&c(this.targetModifier)){var F=this.cache("target-offsetparent",function(){return T(e.target)}),L=this.cache("target-offsetparent-bounds",function(){return u(F)}),Y=getComputedStyle(F),X=L,H={};if(["Top","Left","Bottom","Right"].forEach(function(t){H[t.toLowerCase()]=parseFloat(Y["border"+t+"Width"])}),L.right=P.body.scrollWidth-L.left-X.width+H.right,L.bottom=P.body.scrollHeight-L.top-X.height+H.bottom,M.page.top>=L.top+H.top&&M.page.bottom>=L.bottom&&M.page.left>=L.left+H.left&&M.page.right>=L.right){var S=F.scrollLeft,D=F.scrollTop;M.offset={top:M.page.top-L.top+D-H.top,left:M.page.left-L.left+S-H.left}}}return this.move(M),this.history.unshift(M),this.history.length>3&&this.history.pop(),t&&r(),!0}},v.move=function(t){var e=this;if(!c(this.element.parentNode)){var i={};for(var o in t){i[o]={};for(var n in t[o]){for(var r=!1,h=0;h<this.history.length;++h){var l=this.history[h];if(!c(l[o])&&!W(l[o][n],t[o][n])){r=!0;break}}r||(i[o][n]=!0)}}var p={top:"",left:"",right:"",bottom:""},d=function(t,i){var o=!c(e.options.optimizations),n=o?e.options.optimizations.gpu:null;if(n!==!1){var s,r;t.top?(p.top=0,s=i.top):(p.bottom=0,s=-i.bottom),t.left?(p.left=0,r=i.left):(p.right=0,r=-i.right),f(window.devicePixelRatio)&&devicePixelRatio%1===0&&(r=Math.round(r*devicePixelRatio)/devicePixelRatio,s=Math.round(s*devicePixelRatio)/devicePixelRatio),p[j]="translateX("+r+"px) translateY("+s+"px)","msTransform"!==j&&(p[j]+=" translateZ(0)")}else t.top?p.top=i.top+"px":p.bottom=i.bottom+"px",t.left?p.left=i.left+"px":p.right=i.right+"px"},u=!c(this.options.optimizations),g=!0;u&&this.options.optimizations.allowPositionFixed===!1&&(g=!1);var m=!1;if((i.page.top||i.page.bottom)&&(i.page.left||i.page.right))p.position="absolute",d(i.page,t.page);else if(g&&(i.viewport.top||i.viewport.bottom)&&(i.viewport.left||i.viewport.right))p.position="fixed",d(i.viewport,t.viewport);else if(!c(i.offset)&&i.offset.top&&i.offset.left){p.position="absolute";var v=this.cache("target-offsetparent",function(){return T(e.target)});T(this.element)!==v&&s(function(){e.element.parentNode.removeChild(e.element),v.appendChild(e.element)}),d(i.offset,t.offset),m=!0}else p.position="absolute",d({top:!0,left:!0},t.page);if(!m)if(this.options.bodyElement)this.element.parentNode!==this.options.bodyElement&&this.options.bodyElement.appendChild(this.element);else{for(var b=!0,w=this.element.parentNode;w&&1===w.nodeType&&"BODY"!==w.tagName&&!A(w);){if("static"!==getComputedStyle(w).position){b=!1;break}w=w.parentNode}b||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var y={},C=!1;for(var E in p){var O=p[E],x=this.element.style[E];x!==O&&(C=!0,y[E]=O)}C&&s(function(){a(e.element.style,y),e.trigger("repositioned")})}},v._addClasses=function(){i(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&i(this.target,this.getClass("target"))},v._removeClasses=function(){var t=this;o(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&o(this.target,this.getClass("target")),this.all.forEach(function(e){t.element.classList.remove(e),t.target.classList.remove(e)})},m}(D);U.modules=[],R.position=q;var Z=a(U,R);return Z.modules.push({initialize:function(){var t=this;this.markers={},["target","element"].forEach(function(e){var i=document.createElement("div");i.className=t.getClass(e+"-marker");var o=document.createElement("div");o.className=t.getClass("marker-dot"),i.appendChild(o),t[e].appendChild(i),t.markers[e]={dot:o,el:i}})},position:function(t){var e=t.manualOffset,i=t.manualTargetOffset,o={element:e,target:i};for(var n in o){var s=o[n];for(var r in s){var a=s[r];(!d(a)||a.indexOf("%")===-1&&a.indexOf("px")===-1)&&(a+="px"),this.markers[n].dot.style[r]!==a&&(this.markers[n].dot.style[r]=a)}}return!0}}),Z});